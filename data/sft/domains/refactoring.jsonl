{"instruction": "You are a Rust refactoring expert. Improve the following code structure.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nfn process_users(users: Vec<User>) {\n    for user in &users {\n        println!(\"Processing: {}\", user.name);\n        if user.age > 18 {\n            println!(\"Adult: {}\", user.name);\n        }\n    }\n\n    for user in &users {\n        println!(\"Processing: {}\", user.name);\n        if user.age > 65 {\n            println!(\"Senior: {}\", user.name);\n        }\n    }\n}\n```\n\n## Fixed Code:", "output": "fn log_user(user: &User) {\n    println!(\"Processing: {}\", user.name);\n}\n\nfn process_users(users: Vec<User>) {\n    for user in &users {\n        log_user(user);\n        if user.age > 18 {\n            println!(\"Adult: {}\", user.name);\n        }\n    }\n\n    for user in &users {\n        log_user(user);\n        if user.age > 65 {\n            println!(\"Senior: {}\", user.name);\n        }\n    }\n}", "task_id": "refactor_001", "domain": "refactoring"}
{"instruction": "You are a Rust refactoring expert. Improve the following code structure.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nfn sum_even(numbers: &[i32]) -> i32 {\n    let mut sum = 0;\n    for n in numbers {\n        if n % 2 == 0 {\n            sum += n;\n        }\n    }\n    sum\n}\n```\n\n## Fixed Code:", "output": "fn sum_even(numbers: &[i32]) -> i32 {\n    numbers.iter().filter(|n| *n % 2 == 0).sum()\n}", "task_id": "refactor_002", "domain": "refactoring"}
{"instruction": "You are a Rust refactoring expert. Improve the following code structure.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nfn get_user_email(id: i32) -> Option<String> {\n    match get_user(id) {\n        Some(user) => {\n            match user.email {\n                Some(email) => Some(email),\n                None => None,\n            }\n        }\n        None => None,\n    }\n}\n```\n\n## Fixed Code:", "output": "fn get_user_email(id: i32) -> Option<String> {\n    get_user(id).and_then(|user| user.email)\n}", "task_id": "refactor_003", "domain": "refactoring"}
