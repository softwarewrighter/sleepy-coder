{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nfn process_order(order: Order) -> Result<(), Error> {\n    // Validate order (too much in one function)\n    if order.items.is_empty() {\n        return Err(Error::EmptyOrder);\n    }\n    if order.total < 0.0 {\n        return Err(Error::InvalidTotal);\n    }\n\n    // Calculate tax\n    let tax = order.total * 0.08;\n    let total_with_tax = order.total + tax;\n\n    // Apply discount\n    let discount = if total_with_tax > 100.0 { 0.1 } else { 0.0 };\n    let final_total = total_with_tax * (1.0 - discount);\n\n    // Save to database\n    db::save_order(&order, final_total)?;\n\n    // Send confirmation\n    email::send_confirmation(&order.customer, final_total)?;\n\n    Ok(())\n}\n```\n\n## Fixed Code:", "output": "fn validate_order(order: &Order) -> Result<(), Error> {\n    if order.items.is_empty() {\n        return Err(Error::EmptyOrder);\n    }\n    if order.total < 0.0 {\n        return Err(Error::InvalidTotal);\n    }\n    Ok(())\n}\n\nfn calculate_total(order: &Order) -> f64 {\n    let tax = order.total * 0.08;\n    let total_with_tax = order.total + tax;\n    let discount = if total_with_tax > 100.0 { 0.1 } else { 0.0 };\n    total_with_tax * (1.0 - discount)\n}\n\nfn process_order(order: Order) -> Result<(), Error> {\n    validate_order(&order)?;\n    let final_total = calculate_total(&order);\n    db::save_order(&order, final_total)?;\n    email::send_confirmation(&order.customer, final_total)?;\n    Ok(())\n}", "task_id": "style_001", "domain": "style_metrics"}
{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\n// lib.rs with 15+ functions - violates Module Function Count rule\npub fn create_user() { }\npub fn get_user() { }\npub fn update_user() { }\npub fn delete_user() { }\npub fn list_users() { }\npub fn create_post() { }\npub fn get_post() { }\npub fn update_post() { }\npub fn delete_post() { }\npub fn list_posts() { }\npub fn create_comment() { }\npub fn get_comment() { }\n```\n\n## Fixed Code:", "output": "// lib.rs - organized into submodules\npub mod users;\npub mod posts;\npub mod comments;\n\n// users.rs (max 7 functions)\npub fn create() { }\npub fn get() { }\npub fn update() { }\npub fn delete() { }\npub fn list() { }\n\n// posts.rs (max 7 functions)\npub fn create() { }\npub fn get() { }\npub fn update() { }\npub fn delete() { }\npub fn list() { }\n\n// comments.rs\npub fn create() { }\npub fn get() { }", "task_id": "style_002", "domain": "style_metrics"}
{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nuse clap::Parser;\n\n#[derive(Parser)]\n#[command(name = \"mytool\", version, about = \"A CLI tool\")]\nstruct Cli {\n    #[arg(short, long)]\n    verbose: bool,\n}\n```\n\n## Fixed Code:", "output": "use clap::Parser;\n\n/// A CLI tool\n///\n/// # AI CODING AGENT INSTRUCTIONS\n///\n/// This tool processes files. When using as an AI agent:\n/// - Use --verbose for detailed output\n/// - Exit codes: 0 = success, 1 = error\n/// - Output is JSON when --json flag is set\n#[derive(Parser)]\n#[command(name = \"mytool\", version, about, long_about = None)]\nstruct Cli {\n    #[arg(short, long)]\n    verbose: bool,\n}", "task_id": "style_003", "domain": "style_metrics"}
{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nuse clap::Parser;\n\n#[derive(Parser)]\n#[command(name = \"mytool\", version)]\nstruct Cli { }\n```\n\n## Fixed Code:", "output": "use clap::Parser;\n\nconst VERSION_INFO: &str = concat!(\n    env!(\"CARGO_PKG_VERSION\"),\n    \"\\nCopyright: 2024 Example Corp\",\n    \"\\nLicense: MIT\",\n    \"\\nRepository: https://github.com/example/mytool\",\n    \"\\nBuild Host: \", env!(\"VERGEN_SYSINFO_NAME\"),\n    \"\\nBuild Commit: \", env!(\"VERGEN_GIT_SHA\"),\n    \"\\nBuild Time: \", env!(\"VERGEN_BUILD_TIMESTAMP\"),\n);\n\n#[derive(Parser)]\n#[command(name = \"mytool\", version = VERSION_INFO)]\nstruct Cli { }", "task_id": "style_004", "domain": "style_metrics"}
{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\n#[derive(Parser)]\n#[command(name = \"mytool\")]\nstruct Cli {\n    /// Enable verbose output\n    #[arg(short, long)]\n    verbose: bool,\n}\n```\n\n## Fixed Code:", "output": "#[derive(Parser)]\n#[command(name = \"mytool\")]\nstruct Cli {\n    /// Enable verbose output\n    ///\n    /// When enabled, the tool will print detailed progress information\n    /// including file paths, processing times, and intermediate results.\n    /// Useful for debugging and understanding tool behavior.\n    #[arg(short, long, help = \"Enable verbose output\")]\n    verbose: bool,\n}", "task_id": "style_005", "domain": "style_metrics"}
{"instruction": "You are a Rust code quality expert. Apply coding conventions to improve this code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\n// main.rs - 700+ lines with multiple concerns\nmod config { /* 100 lines */ }\nmod database { /* 200 lines */ }\nmod handlers { /* 300 lines */ }\nmod utils { /* 100 lines */ }\nfn main() { }\n```\n\n## Fixed Code:", "output": "// main.rs - only entry point\nmod config;\nmod database;\nmod handlers;\nmod utils;\n\nfn main() { }\n\n// config.rs - separate file\n// database.rs - separate file\n// handlers.rs - separate file\n// utils.rs - separate file", "task_id": "style_006", "domain": "style_metrics"}
