{"instruction": "Fix: expected `Result<i32, &str>`, found `Option<i32>`\n\nBuggy code:\n```rust\nfn parse_first(v: &[&str]) -> Result<i32, &str> { v.first().map(|s| s.parse().unwrap()) }\n```", "output": "```rust\nfn parse_first(v: &[&str]) -> Result<i32, &str> { v.first().ok_or(\"empty\")?.parse().map_err(|_| \"parse error\") }\n```"}
{"instruction": "Fix: expected `Result<_, _>`, found `Option<_>`\n\nBuggy code:\n```rust\nfn get_value(opt: Option<i32>) -> Result<i32, &'static str> { opt }\n```", "output": "```rust\nfn get_value(opt: Option<i32>) -> Result<i32, &'static str> { opt.ok_or(\"no value\") }\n```"}
{"instruction": "Fix: expected `Result<String, &str>`, found `Option<String>`\n\nBuggy code:\n```rust\nfn get_name(data: Option<&str>) -> Result<String, &str> { data.map(|s| s.to_uppercase()) }\n```", "output": "```rust\nfn get_name(data: Option<&str>) -> Result<String, &str> { data.map(|s| s.to_uppercase()).ok_or(\"missing\") }\n```"}
{"instruction": "Fix: the `?` operator can only be applied to values that implement `Try`\n\nBuggy code:\n```rust\nfn find_user(id: u32) -> Result<String, &'static str> { let users = vec![(1, \"alice\")]; users.iter().find(|(i, _)| *i == id).map(|(_, n)| n.to_string()) }\n```", "output": "```rust\nfn find_user(id: u32) -> Result<String, &'static str> { let users = vec![(1, \"alice\")]; users.iter().find(|(i, _)| *i == id).map(|(_, n)| n.to_string()).ok_or(\"not found\") }\n```"}
{"instruction": "Fix: expected `Result<&i32, &str>`, found `Option<&i32>`\n\nBuggy code:\n```rust\nuse std::collections::HashMap; fn lookup(m: &HashMap<String, i32>, k: &str) -> Result<&i32, &str> { m.get(k) }\n```", "output": "```rust\nuse std::collections::HashMap; fn lookup(m: &HashMap<String, i32>, k: &str) -> Result<&i32, &str> { m.get(k).ok_or(\"key not found\") }\n```"}
{"instruction": "Fix: expected `Result<&T, E>`, found `Option<&T>`\n\nBuggy code:\n```rust\nfn get_item<T>(v: &[T], idx: usize) -> Result<&T, &'static str> { v.get(idx) }\n```", "output": "```rust\nfn get_item<T>(v: &[T], idx: usize) -> Result<&T, &'static str> { v.get(idx).ok_or(\"index out of bounds\") }\n```"}
{"instruction": "Fix: expected `Result<_, String>`, found `Option<_>`\n\nBuggy code:\n```rust\nfn parse_env(key: &str) -> Result<String, String> { std::env::var(key).ok().filter(|s| !s.is_empty()) }\n```", "output": "```rust\nfn parse_env(key: &str) -> Result<String, String> { std::env::var(key).ok().filter(|s| !s.is_empty()).ok_or_else(|| format!(\"missing or empty: {}\", key)) }\n```"}
{"instruction": "Fix: expected `Result<&i32, &str>`, found `Option<&i32>`\n\nBuggy code:\n```rust\nfn head(v: &[i32]) -> Result<&i32, &str> { v.first() }\n```", "output": "```rust\nfn head(v: &[i32]) -> Result<&i32, &str> { v.first().ok_or(\"empty slice\") }\n```"}
