{"instruction": "You are a SQLx database expert. Fix the following database code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nuse sqlx::PgPool;\n\nasync fn get_user(pool: &PgPool, id: i32) -> Result<String, sqlx::Error> {\n    let row = sqlx::query(\"SELECT name FROM users WHERE id = $1\")\n        .bind(id)\n        .fetch_one(pool)\n        .await?;\n    Ok(row.name)\n}\n```\n\n## Fixed Code:", "output": "use sqlx::PgPool;\n\nasync fn get_user(pool: &PgPool, id: i32) -> Result<String, sqlx::Error> {\n    let row = sqlx::query!(\"SELECT name FROM users WHERE id = $1\", id)\n        .fetch_one(pool)\n        .await?;\n    Ok(row.name)\n}", "task_id": "sqlx_001", "domain": "sqlx_db"}
{"instruction": "You are a SQLx database expert. Fix the following database code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nuse sqlx::PgPool;\n\nstruct User {\n    id: i32,\n    name: String,\n}\n\nasync fn get_users(pool: &PgPool) -> Result<Vec<User>, sqlx::Error> {\n    sqlx::query_as(\"SELECT id, name FROM users\")\n        .fetch_all(pool)\n        .await\n}\n```\n\n## Fixed Code:", "output": "use sqlx::{PgPool, FromRow};\n\n#[derive(FromRow)]\nstruct User {\n    id: i32,\n    name: String,\n}\n\nasync fn get_users(pool: &PgPool) -> Result<Vec<User>, sqlx::Error> {\n    sqlx::query_as(\"SELECT id, name FROM users\")\n        .fetch_all(pool)\n        .await\n}", "task_id": "sqlx_002", "domain": "sqlx_db"}
{"instruction": "You are a SQLx database expert. Fix the following database code.\nReturn ONLY the fixed Rust code without explanation.", "input": "## Code:\n```rust\nuse sqlx::PgPool;\n\nasync fn transfer(pool: &PgPool, from: i32, to: i32, amount: i32) -> Result<(), sqlx::Error> {\n    sqlx::query!(\"UPDATE accounts SET balance = balance - $1 WHERE id = $2\", amount, from)\n        .execute(pool)\n        .await?;\n    sqlx::query!(\"UPDATE accounts SET balance = balance + $1 WHERE id = $2\", amount, to)\n        .execute(pool)\n        .await?;\n    Ok(())\n}\n```\n\n## Fixed Code:", "output": "use sqlx::PgPool;\n\nasync fn transfer(pool: &PgPool, from: i32, to: i32, amount: i32) -> Result<(), sqlx::Error> {\n    let mut tx = pool.begin().await?;\n    sqlx::query!(\"UPDATE accounts SET balance = balance - $1 WHERE id = $2\", amount, from)\n        .execute(&mut *tx)\n        .await?;\n    sqlx::query!(\"UPDATE accounts SET balance = balance + $1 WHERE id = $2\", amount, to)\n        .execute(&mut *tx)\n        .await?;\n    tx.commit().await?;\n    Ok(())\n}", "task_id": "sqlx_003", "domain": "sqlx_db"}
